!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,o)=>{document.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(o.inputErrorClass)},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?n(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},r=document.querySelectorAll(".modal");console.log(r);const a=document.querySelector(".profile__edit-btn"),c=document.querySelector("#edit-profile-modal"),s=document.querySelectorAll(".modal__close-btn"),l=c.querySelector("#profile-name-input"),i=c.querySelector("#profile-description-input"),d=document.querySelector(".profile__name"),u=document.querySelector(".profile__description"),m=document.forms["edit-profile"],p=document.querySelector("#card-template"),f=document.querySelector(".cards__list"),_=document.querySelector(".profile__add-btn"),y=document.querySelector("#new-card-modal"),v=y.querySelector("#new-card-link-input"),S=y.querySelector("#new-card-name-input"),g=y.querySelector(".modal__submit-btn"),h=document.forms["new-card-form"],w=document.querySelector("#preview-modal"),q=w.querySelector(".modal__image"),b=w.querySelector(".modal__caption");function k(e){e.classList.add("modal_opened"),document.addEventListener("keydown",L)}function E(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",L)}function L(e){"Escape"===e.key&&E(document.querySelector(".modal_opened"))}function x(e){const t=p.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__delete-btn");o.textContent=e.name;const r=t.querySelector(".card__image"),a=t.querySelector(".card__like-btn");return r.src=e.link,r.alt=e.name,a.addEventListener("click",(()=>{a.classList.toggle("card__like-btn_liked")})),n.addEventListener("click",(()=>{t.remove()})),r.addEventListener("click",(()=>{k(w),b.textContent=e.name,q.src=e.link})),t}var C;a.addEventListener("click",(()=>{var o;l.value=d.textContent,i.value=u.textContent,o=e,[l,i].forEach((e=>{t(0,e,o)})),k(c)})),_.addEventListener("click",(()=>{k(y)})),s.forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>E(t)))})),r.forEach((e=>{e.addEventListener("click",(t=>{t.target===e&&E(e)}))})),[,{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor caffee",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"}].forEach((e=>{const t=x(e);f.append(t)})),m.addEventListener("submit",(function(e){e.preventDefault(),d.textContent=l.value,u.textContent=i.value,E(c)})),h.addEventListener("submit",(function(t){t.preventDefault();const o=x({link:v.value,name:S.value});f.prepend(o),t.target.reset(),n(g,e),E(y)})),C=e,Array.from(document.querySelectorAll(C.formSelector)).forEach((e=>{((e,n)=>{const r=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);o(r,a,n),r.forEach((c=>{c.addEventListener("input",(()=>{((e,o,n)=>{o.validity.valid?t(0,o,n):((e,t,o,n)=>{e.querySelector(`#${t.id}-error`).textContent=o,t.classList.add(n.inputErrorClass)})(e,o,o.validationMessage,n)})(e,c,n),o(r,a,n)}))}))})(e,C)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0YsRUFEQSxDQUFFVyxLQUFNMUIsRUFBYzhCLE1BQU9SLEtBQU1yQixFQUFjNkIsUUFFckVqQyxFQUFVMEMsUUFBUXRCLEdBQ2xCSixFQUFJc0IsT0FBT0ssUUFDWDVELEVBQWNzQixFQUFlL0MsR0FFN0J3RCxFQUFXWixFQUNiLElEcEdpQ2xDLEVDd0doQlYsRUR2R0VzRixNQUFNQyxLQUFLNUUsU0FBU2tCLGlCQUFpQm5CLEVBQU9ULGVBQ3BEMkUsU0FBU3BFLElBZGFnRixFQUFDaEYsRUFBVUUsS0FDMUMsTUFBTVEsRUFBWW9FLE1BQU1DLEtBQUsvRSxFQUFTcUIsaUJBQWlCbkIsRUFBT1IsZ0JBQ3hEdUYsRUFBZ0JqRixFQUFTSSxjQUFjRixFQUFPUCxzQkFDcERjLEVBQWtCQyxFQUFXdUUsRUFBZS9FLEdBRTVDUSxFQUFVMEQsU0FBU2MsSUFDakJBLEVBQWFwQyxpQkFBaUIsU0FBUyxLQXZDaEJxQyxFQUFDbkYsRUFBVUMsRUFBV0MsS0FDMUNELEVBQVVhLFNBQVNDLE1BR3RCaEIsRUFBZUMsRUFBVUMsRUFBV0MsR0FoQmpCa0YsRUFBQ3BGLEVBQVVDLEVBQVdvRixFQUFjbkYsS0FDbkNGLEVBQVNJLGNBQWMsSUFBSUgsRUFBVUksWUFDN0NDLFlBQWMrRSxFQUM1QnBGLEVBQVVNLFVBQVVZLElBQUlqQixFQUFPTCxnQkFBZ0IsRUFXN0N1RixDQUFlcEYsRUFBVUMsRUFBV0EsRUFBVXFGLGtCQUFtQnBGLEVBR25FLEVBbUNJaUYsQ0FBbUJuRixFQUFVa0YsRUFBY2hGLEdBQzNDTyxFQUFrQkMsRUFBV3VFLEVBQWUvRSxFQUFPLEdBQ25ELEdBQ0YsRUFLQThFLENBQWtCaEYsRUFBVUUsRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbSwgaW5wdXRFbGVtLCBlcnJvck1lc3NhZ2UsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1lc3NFbGVtID0gZm9ybUVsZW0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtLmlkfS1lcnJvcmApO1xuICBlcnJvck1lc3NFbGVtLnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICBpbnB1dEVsZW0uY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtLCBpbnB1dEVsZW0sIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1lc3NFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtLmlkfS1lcnJvcmApO1xuICBlcnJvck1lc3NFbGVtLnRleHRDb250ZW50ID0gXCJcIjtcbiAgaW5wdXRFbGVtLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW0sIGlucHV0RWxlbSwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW0sIGlucHV0RWxlbSwgaW5wdXRFbGVtLnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtLCBpbnB1dEVsZW0sIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcbmV4cG9ydCBjb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW0sIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW0sIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uRWxlbS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsZW0uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW0sIGNvbmZpZykgPT4ge1xuICBidXR0b25FbGVtLmRpc2FibGVkID0gdHJ1ZTtcbiAgYnV0dG9uRWxlbS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW0sIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtLCBpbnB1dCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW0sIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbSwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbSkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtLCBjb25maWcpO1xuICB9KTtcbn07XG4vLyBlbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbiAgc2V0RXZlbnRMaXN0ZW5lcnMsXG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICxcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZmZWVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTW91bnRhaW4gaG91c2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXTtcbmNvbnN0IG9wZW5Nb2RhbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xuY29uc29sZS5sb2cob3Blbk1vZGFsTGlzdCk7XG5jb25zdCBlZGl0UHJvZmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBlZGl0TW9kYWxQcm9mID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XG5jb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBlZGl0TW9kYWxJbnB1dE5hbWUgPSBlZGl0TW9kYWxQcm9mLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgZWRpdE1vZGFsSW5wdXREZXNjcmlwdGlvbiA9IGVkaXRNb2RhbFByb2YucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgZWRpdEZvcm1FbGVtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGVcIl07XG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgbmV3UG9zdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcbmNvbnN0IG5ld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LWNhcmQtbW9kYWxcIik7XG5jb25zdCBjYXJkTGlua0lucHV0ID0gbmV3Q2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LWNhcmQtbGluay1pbnB1dFwiKTtcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBuZXdDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNuZXctY2FyZC1uYW1lLWlucHV0XCIpO1xuY29uc3QgY2FyZFN1Ym1pdEJ0biA9IG5ld0NhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIpO1xuY29uc3QgbmV3Q2FyZEZvcm1Nb2RhbCA9IGRvY3VtZW50LmZvcm1zW1wibmV3LWNhcmQtZm9ybVwiXTtcbmNvbnN0IGNhcmRQcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZSA9IGNhcmRQcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uID0gY2FyZFByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlTW9kYWxFc2MpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZU1vZGFsRXNjKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTW9kYWxFc2MoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xuICB9XG59XG5lZGl0UHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0TW9kYWxJbnB1dE5hbWUudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgZWRpdE1vZGFsSW5wdXREZXNjcmlwdGlvbi52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgcmVzZXRWYWxpZGF0aW9uKFxuICAgIGVkaXRGb3JtRWxlbSxcbiAgICBbZWRpdE1vZGFsSW5wdXROYW1lLCBlZGl0TW9kYWxJbnB1dERlc2NyaXB0aW9uXSxcbiAgICBzZXR0aW5nc1xuICApO1xuICBvcGVuTW9kYWwoZWRpdE1vZGFsUHJvZik7XG59KTtcblxubmV3UG9zdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwobmV3Q2FyZE1vZGFsKTtcbn0pO1xuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChwb3B1cCkpO1xufSk7XG5cbm9wZW5Nb2RhbExpc3QuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gbW9kYWwpIHtcbiAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgY29uc3QgY2FyZE5hbWVFbGVtID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcbiAgY2FyZE5hbWVFbGVtLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuXG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRMaWtlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGRhdGEubmFtZTtcblxuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBvcGVuTW9kYWwoY2FyZFByZXZpZXdNb2RhbCk7XG5cbiAgICBwcmV2aWV3TW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdNb2RhbEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xuICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFZGl0Rm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZWRpdE1vZGFsSW5wdXROYW1lLnZhbHVlO1xuICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBlZGl0TW9kYWxJbnB1dERlc2NyaXB0aW9uLnZhbHVlO1xuICBjbG9zZU1vZGFsKGVkaXRNb2RhbFByb2YpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVOZXdDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IGxpbms6IGNhcmRMaW5rSW5wdXQudmFsdWUsIG5hbWU6IGNhcmROYW1lSW5wdXQudmFsdWUgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdG4sIHNldHRpbmdzKTtcblxuICBjbG9zZU1vZGFsKG5ld0NhcmRNb2RhbCk7XG59XG5cbmVkaXRGb3JtRWxlbS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRGb3JtU3VibWl0KTtcbm5ld0NhcmRGb3JtTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdDYXJkU3VibWl0KTtcbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtIiwiaW5wdXRFbGVtIiwiY29uZmlnIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbSIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJvcGVuTW9kYWxMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImNvbnNvbGUiLCJsb2ciLCJlZGl0UHJvZmlsZUJ0biIsImVkaXRNb2RhbFByb2YiLCJjbG9zZUJ1dHRvbnMiLCJlZGl0TW9kYWxJbnB1dE5hbWUiLCJlZGl0TW9kYWxJbnB1dERlc2NyaXB0aW9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJlZGl0Rm9ybUVsZW0iLCJmb3JtcyIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsIm5ld1Bvc3RCdG4iLCJuZXdDYXJkTW9kYWwiLCJjYXJkTGlua0lucHV0IiwiY2FyZE5hbWVJbnB1dCIsImNhcmRTdWJtaXRCdG4iLCJuZXdDYXJkRm9ybU1vZGFsIiwiY2FyZFByZXZpZXdNb2RhbCIsInByZXZpZXdNb2RhbEltYWdlIiwicHJldmlld01vZGFsQ2FwdGlvbiIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZU1vZGFsRXNjIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJnZXRDYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkTmFtZUVsZW0iLCJjYXJkRGVsZXRlQnRuIiwibmFtZSIsImNhcmRJbWFnZSIsImNhcmRMaWtlQnRuIiwic3JjIiwibGluayIsImFsdCIsInRvZ2dsZSIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwiZm9yRWFjaCIsImJ1dHRvbiIsInBvcHVwIiwiY2xvc2VzdCIsInRhcmdldCIsIml0ZW0iLCJhcHBlbmQiLCJwcmV2ZW50RGVmYXVsdCIsInByZXBlbmQiLCJyZXNldCIsIkFycmF5IiwiZnJvbSIsInNldEV2ZW50TGlzdGVuZXJzIiwiYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9